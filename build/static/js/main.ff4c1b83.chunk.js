(this["webpackJsonpcurrency-portfolio"]=this["webpackJsonpcurrency-portfolio"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),r=a(24),s=a.n(r),o=(a(64),a(65),a(66),a(10)),i=a(8),l=a(12),j=a(29),u=a(103),d=a(104),b=a(105),O=a(106),m=a(107),f=a(102),h=a(28),x=a.n(h),p="USER_REGISTERED",g="USER_LOADING",S="LOGIN_SUCCESS",N="CURRENCY_LOADING",y="CURRENCY_LOADED",v="PORTFOLIO_START",D="CURRENCY_RATE",w="GET_TOTAL",A=a(3),J=function(e){var t=Object(c.useState)(!1),a=Object(o.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(!1),h=Object(o.a)(s,2),x=h[0],p=h[1],g=Object(i.b)(),N=Object(l.f)(),y=Object(c.useState)(""),v=Object(o.a)(y,2),D=v[0],w=v[1];return Object(A.jsxs)(A.Fragment,{children:[!n&&x?Object(A.jsx)(f.a,{color:"warning",children:"Please register new account"}):null,Object(A.jsxs)(u.a,{className:"w-50 mx-auto border border-secondary mt-5 p-5",onSubmit:function(e){e.preventDefault();var t=JSON.parse(localStorage.getItem(D));t?(g(function(e){return function(t){t({type:S,payload:e})}}(t)),N.push("/")):(r(!1),p(!0),setTimeout((function(){p(!1)}),3e3))},children:[Object(A.jsx)("h1",{children:"Login"}),Object(A.jsx)("hr",{}),Object(A.jsxs)(d.a,{className:"mb-2 mr-sm-2 mb-sm-0",children:[Object(A.jsx)(b.a,{for:"exampleEmail",className:"mr-sm-2",children:"Account name"}),Object(A.jsx)(O.a,{type:"name",name:"name",id:"exampleName",placeholder:"john",onChange:function(e){return w(e.target.value)}})]}),Object(A.jsx)(m.a,{color:"danger",className:"px-5 mt-5",children:"Login"})," ",Object(A.jsx)("br",{}),Object(A.jsx)(j.b,{className:"float-start  py-3",to:"/register",children:"Register"})]})]})},C=function(e,t){return function(a,c){console.log(e),x.a.get("https://v6.exchangerate-api.com/v6/61ae5c15d41f8f7ab2cdfdef/latest/".concat(e[0])).then((function(e){return a({type:D,payload:e.data.conversion_rates[t]})}))}},E=a.p+"static/media/logo.2f2718d3.svg",R=a(55),L=a(108),k=a(109),T=a(110),I=a(111),U=a(112),P=a(113),_=a(114),Y=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),a=t[0],n=t[1],r=Object(i.b)(),s=Object(i.c)((function(e){return e.auth.user.name}));return Object(A.jsx)("div",{children:Object(A.jsxs)(L.a,{color:"dark",dark:!0,expand:"md",className:"mb-5",children:[Object(A.jsx)(k.a,{href:"/",className:"mr-auto",children:Object(A.jsx)("img",{src:E,alt:"fdf",width:80,height:50})}),Object(A.jsx)(T.a,{onClick:function(){return n(!a)},className:"mr-2"}),Object(A.jsx)(I.a,{className:"justify-content-end me-5",style:{color:"red"},isOpen:!a,navbar:!0,children:Object(A.jsxs)(U.a,{navbar:!0,children:[Object(A.jsxs)(P.a,{className:"d-flex align-items-center justify-content-center",children:[Object(A.jsx)(R.a,{color:"white"}),Object(A.jsx)(_.a,{href:"#",children:"welcome ".concat(s)})," "]})," ",Object(A.jsxs)(P.a,{children:[Object(A.jsx)(_.a,{style:{background:"red",cursor:"pointer"},className:"d-flex align-items-center justify-content-center ms-4",onClick:function(){r((function(e){e({type:g})}))},children:"Logout"})," "]})," "]})})]})})},G=a(9),H=a(117),B=a(115),M=a(116),F=function(e){return function(t,a){var c=JSON.parse(localStorage.getItem(e)).portfolio;t({type:v,payload:c})}},W=function(e){e.buttonLabel;var t=e.className,a=e.selected,n=Object(i.c)((function(e){return e.codes.rates})),r=Object(i.b)(),s=Object(c.useState)("USD"),l=Object(o.a)(s,2),j=l[0],h=l[1],x=Object(c.useState)(""),p=Object(o.a)(x,2),g=p[0],S=p[1],N=Object(c.useState)(!1),y=Object(o.a)(N,2),v=y[0],D=y[1],w=Object(c.useState)(!1),J=Object(o.a)(w,2),E=J[0],R=J[1],L=Object(i.c)((function(e){return e.portfolioData.map((function(e){return e.acronym}))})),k=Object(i.c)((function(e){return e.auth.user.name})),T=Object(i.c)((function(e){return e.portfolioData})),I=Object(c.useState)(!1),U=Object(o.a)(I,2),P=U[0],_=U[1],Y=function(){return _(!P)};Object(c.useEffect)((function(){a&&Y(),r(C(a,"USD"))}),[a]);return Object(A.jsx)("div",{children:Object(A.jsxs)(H.a,{isOpen:P,toggle:Y,className:t,children:[v?Object(A.jsx)(f.a,{color:"danger",children:"You entered an invalid amount"}):null,E?Object(A.jsx)(f.a,{color:"warning",children:"You entered high amount"}):null,Object(A.jsxs)(B.a,{toggle:Y,className:"text-center",children:[L.map((function(e,t){return Object(A.jsx)(m.a,{className:"m-1",onClick:function(){return function(e){h(e),r(C(a,e))}(e)},color:"success",children:e},t)})),Object(A.jsx)("div",{className:"d-flex justify-content-between",children:Object(A.jsxs)("h5",{children:[a[1]," to ",j]})})]}),Object(A.jsxs)(M.a,{className:"mx-5",children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{children:"Rate:"}),Object(A.jsx)("span",{className:"text-danger mx-3 fs-4",children:n})]}),Object(A.jsxs)(u.a,{onSubmit:function(e){e.preventDefault(),function(){var e=JSON.stringify(T),t=JSON.parse(e);0===JSON.parse(g)&&(D(!0),setTimeout((function(){D(!1)}),5e3),Y());var c=t.findIndex((function(e){return e.acronym===j})),s=t.findIndex((function(e){return e.acronym===a[0]}));t[c].totalAsset>JSON.parse(g)?(t[c].totalAsset=t[c].totalAsset-JSON.parse(g*n),s>=0?t[s].totalAsset=t[s].totalAsset+JSON.parse(g):0!==JSON.parse(g)&&t.push({acronym:a[0],name:a[1],totalAsset:JSON.parse(g)})):(R(!0),setTimeout((function(){R(!1)}),5e3),Y());var o=JSON.parse(localStorage.getItem(k));localStorage.setItem(k,JSON.stringify(Object(G.a)(Object(G.a)({},o),{},{portfolio:t}))),r(F(k))}()},children:[Object(A.jsxs)(d.a,{className:"d-flex align-items-center",children:[Object(A.jsx)(b.a,{for:"exampleEmail",className:"me-2",children:"Amount"}),Object(A.jsx)(O.a,{type:"text",name:"amount",id:"exampleEmail",onChange:function(e){S(e.target.value)},placeholder:"20"})]}),Object(A.jsx)(m.a,{type:"submit",color:"primary",className:"mt-3",onClick:Y,children:"Exchange"})," "]})]})]})})},z=a(56),$=a(20),q=a(37),K=function(e){var t=Object(i.b)(),a=e.buttonLabel,n=e.className,r=e.selected,s=Object(c.useState)("USD"),l=Object(o.a)(s,2),j=l[0],h=l[1],x=Object(c.useState)(!1),p=Object(o.a)(x,2),g=p[0],S=p[1],N=Object(c.useState)(!1),y=Object(o.a)(N,2),v=y[0],D=y[1],w=Object(c.useState)(!1),J=Object(o.a)(w,2),E=J[0],R=J[1],L=Object(c.useState)(""),k=Object(o.a)(L,2),T=k[0],I=k[1],U=Object(i.c)((function(e){return e.portfolioData.map((function(e){return e.acronym}))})),P=Object(i.c)((function(e){return e.portfolioData})),_=Object(i.c)((function(e){return e.codes.rates})),Y=Object(i.c)((function(e){return e.auth.user.name})),W=function(){return R(!E)};Object(c.useEffect)((function(){t(C(r,"USD"))}),[]);return Object(A.jsxs)("div",{children:[Object(A.jsx)(m.a,{color:"success",onClick:W,children:a}),Object(A.jsxs)(H.a,{isOpen:E,toggle:W,className:n,children:[Object(A.jsxs)(B.a,{toggle:W,children:[g?Object(A.jsx)(f.a,{color:"danger",children:"You entered an invalid amount"}):null,v?Object(A.jsx)(f.a,{color:"warning",children:"You entered high amount"}):null,U.map((function(e,a){return Object(A.jsx)(m.a,{className:"m-1",onClick:function(){return function(e){h(e),t(C(r,e))}(e)},color:"success",children:e},a)})),Object(A.jsx)("div",{className:"d-flex justify-content-between",children:Object(A.jsxs)("h5",{children:[j," to ",r[0]]})})]}),Object(A.jsxs)(M.a,{children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{children:"Rate:"}),Object(A.jsx)("span",{className:"text-danger mx-3 fs-4",children:Number((1/_).toFixed(4))})]}),Object(A.jsxs)(u.a,{onSubmit:function(e){e.preventDefault(),function(){var e=JSON.stringify(P),a=JSON.parse(e);0===JSON.parse(T)&&(S(!0),setTimeout((function(){S(!1)}),5e3),W());var c=a.findIndex((function(e){return e.acronym===j})),n=a.findIndex((function(e){return e.acronym===r[0]}));a[c].totalAsset>JSON.parse(T)?(a[c].totalAsset=a[c].totalAsset-JSON.parse(T*_),n>=0?a[n].totalAsset=a[n].totalAsset+JSON.parse(T):0!==JSON.parse(T)&&a.push({acronym:r[0],name:r[1],totalAsset:JSON.parse(T)})):(D(!0),setTimeout((function(){D(!1)}),5e3),W());var s=JSON.parse(localStorage.getItem(Y));localStorage.setItem(Y,JSON.stringify(Object(G.a)(Object(G.a)({},s),{},{portfolio:a}))),t(F(Y))}()},children:[Object(A.jsxs)(d.a,{className:"d-flex align-items-center",children:[Object(A.jsx)(b.a,{for:"exampleEmail",className:"me-2",children:"Amount"}),Object(A.jsx)(O.a,{type:"text",name:"amount",id:"exampleEmail",onChange:function(e){I(e.target.value)},placeholder:"20"})]}),Object(A.jsx)(m.a,{type:"submit",color:"primary",className:"mt-3",onClick:W,children:"Exchange"})," "]})]})]})]})},Q=function(e){var t=Object(i.b)(),a=e.buttonLabel,n=e.className,r=e.selected,s=Object(c.useState)("USD"),l=Object(o.a)(s,2),j=l[0],h=l[1],x=Object(c.useState)(!1),p=Object(o.a)(x,2),g=p[0],S=p[1],N=Object(c.useState)(!1),y=Object(o.a)(N,2),v=y[0],D=(y[1],Object(c.useState)(!1)),w=Object(o.a)(D,2),J=w[0],E=w[1],R=Object(c.useState)(""),L=Object(o.a)(R,2),k=L[0],T=L[1],I=Object(i.c)((function(e){return e.portfolioData.map((function(e){return e.acronym}))})),U=(Object(i.c)((function(e){return e.portfolioData.map((function(e){return e.acronym}))})),Object(i.c)((function(e){return e.portfolioData}))),P=Object(i.c)((function(e){return e.codes.rates})),_=Object(i.c)((function(e){return e.auth.user.name})),Y=function(){return E(!J)};return Object(A.jsxs)("div",{className:"mx-2",children:[Object(A.jsx)(m.a,{color:"danger",onClick:Y,children:a}),Object(A.jsxs)(H.a,{isOpen:J,toggle:Y,className:n,children:[Object(A.jsxs)(B.a,{toggle:Y,children:[g?Object(A.jsx)(f.a,{color:"danger",children:"You entered an invalid amount"}):null,v?Object(A.jsx)(f.a,{color:"warning",children:"You entered high amount"}):null,I.map((function(e,a){return Object(A.jsx)(m.a,{className:"m-1",onClick:function(){return function(e){h(e),t(C(r,e))}(e)},color:"success",children:e},a)})),Object(A.jsx)("div",{className:"d-flex justify-content-between",children:Object(A.jsxs)("h5",{children:[r[0]," to ",j]})})]}),Object(A.jsxs)(M.a,{children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{children:"Rate:"}),Object(A.jsx)("span",{className:"text-danger mx-3 fs-4",children:P})]}),Object(A.jsxs)(u.a,{onSubmit:function(e){e.preventDefault(),function(){var e=JSON.stringify(U),a=JSON.parse(e);0===JSON.parse(k)&&(S(!0),setTimeout((function(){S(!1)}),5e3),Y()),console.log(j),console.log(r);var c=JSON.parse(localStorage.getItem(_));localStorage.setItem(_,JSON.stringify(Object(G.a)(Object(G.a)({},c),{},{portfolio:a}))),t(F(_))}()},children:[Object(A.jsxs)(d.a,{className:"d-flex align-items-center",children:[Object(A.jsx)(b.a,{for:"exampleEmail",className:"me-2",children:"Amount"}),Object(A.jsx)(O.a,{type:"text",name:"amount",id:"exampleEmail",onChange:function(e){T(e.target.value)},placeholder:"20"})]}),Object(A.jsx)(m.a,{type:"submit",color:"primary",className:"mt-3",onClick:Y,children:"Exchange"})," "]})]})]})]})},V=function(){var e=Object(i.c)((function(e){return e.portfolioData})),t=Object(c.useMemo)((function(){return Object($.a)(e)}),[e]),a=Object(c.useMemo)((function(){return[{Header:"Acronym",accessor:"acronym"},{Header:"Name",accessor:"name"},{Header:"Amount",accessor:function(e){return e.totalAsset.toFixed(3)}},{width:300,Header:"Trade",Cell:function(e){var t=e.row;return Object(A.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(A.jsx)(K,{buttonLabel:"Buy",selected:[t.original.acronym,t.original.name]}),Object(A.jsx)(Q,{buttonLabel:"Sell",selected:[t.original.acronym,t.original.name]})]})}}]}),[]),n=Object(q.useTable)({columns:a,data:t},q.useSortBy,q.usePagination),r=n.getTableProps,s=n.getTableBodyProps,o=n.headerGroups,l=(n.nextPage,n.previousPage,n.prepareRow),j=n.page;n.canPreviousPage,n.canNextPage;return Object(A.jsx)("div",{className:"d-flex flex-column mb-5 mt-5 mx-5",children:Object(A.jsxs)("table",Object(G.a)(Object(G.a)({},r()),{},{style:{borderRadius:"15px"},children:[Object(A.jsx)("thead",{children:o.map((function(e){return Object(A.jsx)("tr",Object(G.a)(Object(G.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(A.jsxs)("th",Object(G.a)(Object(G.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{className:"border",style:{background:"#f3f4f6",color:"black",paddingLeft:"12px"},children:[e.render("Header"),Object(A.jsx)("span",{children:e.isSorted?e.isSortedDesc?"\ud83d\udd3d":"\ud83d\udd3c":""})]}))}))}))}))}),Object(A.jsx)("tbody",Object(G.a)(Object(G.a)({},s()),{},{children:j.map((function(e){return l(e),Object(A.jsx)("tr",Object(G.a)(Object(G.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(A.jsx)("td",Object(G.a)(Object(G.a)({},e.getCellProps()),{},{className:"border py-2 ",style:{textDecorationLine:"none",paddingLeft:"7px"},children:e.render("Cell")}))}))}))}))}))]}))})},X=a(58);function Z(){var e=Object(l.f)(),t=Object(i.c)((function(e){return e.auth.isLogin})),a=Object(i.c)((function(e){return e.auth.user.name})),n=Object(i.c)((function(e){return e.codes.date})),r=(Object(i.c)((function(e){return e.portfolioData})),Object(i.c)((function(e){return e.totalAssets}))),s=Object(c.useState)(""),j=Object(o.a)(s,2),u=j[0],d=j[1],b=Object(i.c)((function(e){return e.codes.data.map((function(e){return{key:e[0],value:"".concat(e[0],"-").concat(e[1])}}))})),O=Object(i.b)();return Object(c.useEffect)((function(){O((function(e,t){e({type:N}),x.a.get("https://v6.exchangerate-api.com/v6/61ae5c15d41f8f7ab2cdfdef/codes").then((function(t){return e({type:y,payload:t.data.supported_codes})}))})),t&&(O(F(a)),O((function(e,t){var a=t().auth.user.name,c=t().portfolioData;console.log(c),x.a.get("https://v6.exchangerate-api.com/v6/61ae5c15d41f8f7ab2cdfdef/latest/USD").then((function(t){var n=t.data.conversion_rates,r=c.map((function(e){return e.totalAsset/n[e.acronym]})).reduce((function(e,t){return e+t}),0);e({type:w,payload:Math.round(r)});var s=JSON.parse(localStorage.getItem(a));s.totalAsset=Math.round(r),localStorage.setItem(a,JSON.stringify(s))}))})))}),[]),Object(A.jsx)("div",{children:t?Object(A.jsxs)("div",{children:[Object(A.jsx)(Y,{}),Object(A.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(A.jsxs)("h2",{children:["TotalAssets:",r]}),Object(A.jsx)(X.a,{size:30})]}),Object(A.jsxs)("div",{className:"w-50 mx-auto mt-5",children:[Object(A.jsx)(z.a,{placeholder:"Search for currency",onSelect:function(e){d([e.item.key,e.item.value])},value:"Doe",data:b,callback:function(e){return console.log(e)}})," ",Object(A.jsx)(W,{selected:u})]}),Object(A.jsx)(V,{}),Object(A.jsx)("span",{style:{color:"red"},children:"Last Updated: "}),Object(A.jsx)("span",{className:"pb-5",children:n})]}):e.push("/login")})}function ee(){var e=Object(i.b)(),t=Object(l.f)(),a=Object(c.useState)(""),n=Object(o.a)(a,2),r=n[0],s=n[1],j=Object(c.useState)(""),f=Object(o.a)(j,2),h=f[0],x=f[1];return Object(A.jsx)("div",{children:Object(A.jsxs)(u.a,{className:"w-50 mx-auto border border-secondary mt-5 p-4",onSubmit:function(a){a.preventDefault();var c,n={name:r,surname:h,portfolio:[{acronym:"USD",name:"United States Dollar",totalAsset:1e3}]};e((c=n,function(e,t){e({type:p,payload:c})})),localStorage.setItem(n.name,JSON.stringify(n)),t.push("/")},children:[Object(A.jsx)("h1",{children:"Register"}),Object(A.jsx)("hr",{}),Object(A.jsxs)(d.a,{className:"mb-2 mr-sm-2 mb-sm-0",children:[Object(A.jsx)(b.a,{for:"exampleEmail",className:"mr-sm-2",children:"Name"}),Object(A.jsx)(O.a,{type:"name",name:"name",id:"exampleName",placeholder:"john",onChange:function(e){return s(e.target.value)}})]}),Object(A.jsxs)(d.a,{className:"mb-2 mr-sm-2 mb-sm-0",children:[Object(A.jsx)(b.a,{for:"name",className:"mr-sm-2",children:"Surname"}),Object(A.jsx)(O.a,{type:"name",name:"name",id:"exampleSurname",placeholder:"doe",onChange:function(e){return x(e.target.value)}})]}),Object(A.jsx)(m.a,{color:"success",className:"px-5 mt-5",children:"Register"})]})})}var te=function(){return Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)(j.a,{children:Object(A.jsxs)(l.c,{children:[Object(A.jsx)(l.a,{path:"/login",children:Object(A.jsx)(J,{})}),Object(A.jsx)(l.a,{path:"/register",children:Object(A.jsx)(ee,{})}),Object(A.jsx)(l.a,{path:"/",children:Object(A.jsx)(Z,{})})]})})," "]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=a(59),ce={isRegistered:!1,isLogin:!1,user:{name:"",surname:""}},ne={data:[],rates:[],date:"",loading:!1},re=[],se=Object(ae.a)({reducer:{auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(G.a)(Object(G.a)({},e),{},{isLogin:!0,isRegistered:!0,user:{name:t.payload.name,surname:t.payload.surname}});case g:return Object(G.a)(Object(G.a)({},e),{},{isLogin:"",isRegistered:"",user:{name:"",surname:""}});case S:return Object(G.a)(Object(G.a)({},e),{},{isLogin:!0,isRegistered:!0,user:{name:t.payload.name,surname:t.payload.surname}});default:return e}},codes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(G.a)(Object(G.a)({},e),{},{loading:!0,date:new Date(Date.now()).toUTCString()});case y:return Object(G.a)(Object(G.a)({},e),{},{data:t.payload,loading:!1});case D:return Object(G.a)(Object(G.a)({},e),{},{rates:t.payload,date:new Date(Date.now()).toUTCString()});default:return e}},portfolioData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return t.payload;case g:return[];default:return e}},totalAssets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return t.payload;default:return e}}}});s.a.render(Object(A.jsx)(n.a.StrictMode,{children:Object(A.jsx)(i.a,{store:se,children:Object(A.jsx)(te,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},64:function(e,t,a){},66:function(e,t,a){}},[[100,1,2]]]);
//# sourceMappingURL=main.ff4c1b83.chunk.js.map